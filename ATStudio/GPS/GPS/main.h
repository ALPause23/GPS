#ifndef MAIN_H_
	#define MAIN_H_
	
	#define F_CPU 8000000UL
	#define F_I2C 50000UL
	#define TWBR_VALUE (((F_CPU)/(F_I2C)-16)/2)
	#define RTC_RESET_POINTER   0xff

	#if ((TWBR_VALUE > 255) || (TWBR_VALUE == 0))
		#error "TWBR value is not correct"
	#endif
	
	#include <avr/io.h>
	#include <avr/interrupt.h>
	#include <util/delay.h>
	#include <stdio.h>
	#include <stdlib.h>
	#include <avr/io.h>
	#include <avr/pgmspace.h>
	#include <util/delay.h>
	#include "util/twi.h"
	
#endif /* MAIN_H_ */


#if defined SSD1306_128_64
#define SSD1306_LCDWIDTH                  128
#define SSD1306_LCDHEIGHT                 64
#endif
#if defined SSD1306_128_32
#define SSD1306_LCDWIDTH                  128
#define SSD1306_LCDHEIGHT                 32
#endif
#if defined SSD1306_96_16
#define SSD1306_LCDWIDTH                  96
#define SSD1306_LCDHEIGHT                 16
#endif

#define SSD1306_SETCONTRAST 0x81
#define SSD1306_DISPLAYALLON_RESUME 0xA4
#define SSD1306_DISPLAYALLON 0xA5
#define SSD1306_NORMALDISPLAY 0xA6
#define SSD1306_INVERTDISPLAY 0xA7
#define SSD1306_DISPLAYOFF 0xAE
#define SSD1306_DISPLAYON 0xAF

#define SSD1306_SETDISPLAYOFFSET 0xD3
#define SSD1306_SETCOMPINS 0xDA

#define SSD1306_SETVCOMDETECT 0xDB

#define SSD1306_SETDISPLAYCLOCKDIV 0xD5
#define SSD1306_SETPRECHARGE 0xD9

#define SSD1306_SETMULTIPLEX 0xA8

#define SSD1306_SETLOWCOLUMN 0x00
#define SSD1306_SETHIGHCOLUMN 0x10

#define SSD1306_SETSTARTLINE 0x40

#define SSD1306_MEMORYMODE 0x20
#define SSD1306_COLUMNADDR 0x21
#define SSD1306_PAGEADDR   0x22

#define SSD1306_COMSCANINC 0xC0
#define SSD1306_COMSCANDEC 0xC8

#define SSD1306_SEGREMAP 0xA0

#define SSD1306_CHARGEPUMP 0x8D

#define SSD1306_EXTERNALVCC 0x1
#define SSD1306_SWITCHCAPVCC 0x2

// Scrolling #defines
#define SSD1306_ACTIVATE_SCROLL 0x2F
#define SSD1306_DEACTIVATE_SCROLL 0x2E
#define SSD1306_SET_VERTICAL_SCROLL_AREA 0xA3
#define SSD1306_RIGHT_HORIZONTAL_SCROLL 0x26
#define SSD1306_LEFT_HORIZONTAL_SCROLL 0x27
#define SSD1306_VERTICAL_AND_RIGHT_HORIZONTAL_SCROLL 0x29
#define SSD1306_VERTICAL_AND_LEFT_HORIZONTAL_SCROLL 0x2A
#define SSD1306_LCDHEIGHT 64

#define I2CADDR   0x78

void SEND (unsigned char data);
void STOP ();
void START ();

unsigned char init[18]=
{
	0xA8,0x3F,0x00,0x40,0xA1,0xC8,0xDA,0x12,
	0x81,0x7F,0xA4,0xA6,0xD5,0x80,0x8D,0x14,0xAF,
};

//Õ¿ƒœ»—‹ RADIOKOT.RU Ë –»—”ÕŒ   Œ“¿
unsigned char screen_1[1024]=
{
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0xE0, 0xE0, 0x60, 0x60, 0x60, 0xE0, 0xC0, 0x00,
	0x00, 0x00, 0x00, 0xC0, 0xE0, 0xE0, 0xC0, 0x00,
	0x00, 0x00, 0x00, 0xE0, 0xE0, 0x60, 0x60, 0x60,
	0x60, 0xC0, 0x80, 0x00, 0x00, 0xE0, 0xE0, 0x00,
	0x00, 0x80, 0xC0, 0xE0, 0x60, 0x60, 0x60, 0xE0,
	0xC0, 0x80, 0x00, 0x00, 0xE0, 0xE0, 0x00, 0x00,
	0x80, 0xE0, 0x60, 0x00, 0x00, 0x80, 0xC0, 0xE0,
	0x60, 0x60, 0x60, 0xE0, 0xC0, 0x80, 0x00, 0x60,
	0x60, 0x60, 0xE0, 0xE0, 0x60, 0x60, 0x60, 0x00,
	0x00, 0x00, 0x00, 0x00, 0xE0, 0xE0, 0x60, 0x60,
	0x60, 0xE0, 0xC0, 0x00, 0x00, 0xE0, 0xE0, 0x00,
	0x00, 0x00, 0x00, 0xE0, 0xE0, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x7F, 0x7F, 0x06, 0x06, 0x1E, 0x7B, 0x73, 0x40,
	0x00, 0x78, 0x7F, 0x1F, 0x18, 0x18, 0x1F, 0x7E,
	0x70, 0x00, 0x00, 0x7F, 0x7F, 0x60, 0x60, 0x60,
	0x70, 0x3F, 0x1F, 0x00, 0x00, 0x7F, 0x7F, 0x00,
	0x00, 0x1F, 0x3F, 0x70, 0x60, 0x60, 0x60, 0x70,
	0x3F, 0x1F, 0x00, 0x00, 0x7F, 0x7F, 0x06, 0x07,
	0x1F, 0x78, 0x60, 0x40, 0x00, 0x1F, 0x3F, 0x70,
	0x60, 0x60, 0x60, 0x70, 0x3F, 0x1F, 0x00, 0x00,
	0x00, 0x00, 0x7F, 0x7F, 0x00, 0x00, 0x00, 0x00,
	0x60, 0x60, 0x00, 0x00, 0x7F, 0x7F, 0x06, 0x06,
	0x0E, 0x3F, 0x71, 0x40, 0x00, 0x1F, 0x3F, 0x70,
	0x60, 0x60, 0x70, 0x3F, 0x1F, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x80, 0xC0,
	0xC0, 0xC0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0,
	0xE0, 0xF0, 0xE0, 0xE0, 0xF0, 0x70, 0x70, 0xB0,
	0xF0, 0xB0, 0xE0, 0x20, 0xE0, 0x60, 0xE0, 0xE0,
	0xE0, 0xE0, 0xE0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0,
	0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x80, 0xC0, 0xC0, 0xF0, 0xF0, 0xF8, 0xF8,
	0xFC, 0xFC, 0xFE, 0xFE, 0xFF, 0xFF, 0x7F, 0xFF,
	0xBF, 0xBF, 0xDF, 0xFF, 0xEF, 0xF7, 0xFB, 0xFF,
	0xFB, 0xFD, 0xFD, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFD,
	0xFD, 0xF7, 0xAF, 0x7F, 0xFF, 0xFF, 0xFF, 0xFF,
	0xFF, 0xFF, 0xFF, 0xFF, 0xFE, 0xFE, 0xFE, 0xFC,
	0xFC, 0xF8, 0xF8, 0xF0, 0xE0, 0xE0, 0xC0, 0xC0,
	0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x80, 0xE0, 0xFC, 0xFF,
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x7F,
	0xBF, 0xFF, 0xCF, 0xF7, 0xFB, 0xFE, 0xFF, 0xFF,
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x7F,
	0x7F, 0x9F, 0xCF, 0xF2, 0xFF, 0xE7, 0xDF, 0x97,
	0x37, 0x77, 0xFF, 0xF7, 0xEF, 0xEF, 0xEF, 0xFF,
	0xF7, 0xF7, 0xF7, 0xF7, 0xFB, 0xFB, 0xFB, 0xFB,
	0xFB, 0xFB, 0xFB, 0xFB, 0xFA, 0xF8, 0xF4, 0xF4,
	0xFC, 0xE0, 0xE0, 0xE0, 0xF0, 0xF0, 0x78, 0x38,
	0x98, 0x38, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0xE0, 0xFC, 0xFF, 0xFF, 0xFF, 0xFF,
	0xFF, 0xFF, 0x7F, 0xDF, 0xFB, 0xFC, 0xFE, 0xFF,
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
	0xFF, 0xFF, 0xFF, 0xFF, 0xBF, 0xFF, 0xDF, 0xFF,
	0xF7, 0xFF, 0xFF, 0xFD, 0xFE, 0xFF, 0xFF, 0xFF,
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xDF, 0x7F,
	0xDC, 0x5A, 0x54, 0x7F, 0x5F, 0x5F, 0x5F, 0x7F,
	0x5F, 0x3F, 0xFF, 0xB3, 0xF9, 0xF3, 0xFF, 0xFF,
	0xDF, 0xFF, 0xFF, 0xF3, 0xF9, 0xB3, 0x7F, 0x3F,
	0x7F, 0x5F, 0x7F, 0x5F, 0x5F, 0x7C, 0x54, 0x91,
	0x90, 0xA0, 0x00, 0xA0, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
	0xFF, 0xFD, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x7F, 0xFF, 0xEF,
	0xF7, 0xFD, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFE, 0xFF,
	0xFF, 0xFD, 0xFD, 0xF7, 0xFE, 0xDF, 0xBE, 0xFF,
	0x7E, 0x7F, 0x7E, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFE, 0xFF,
	0x7E, 0x7F, 0xBE, 0x1F, 0x6E, 0x43, 0xC1, 0x80,
	0x02, 0x00, 0x01, 0x00, 0x01, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x07, 0x0F, 0x1F, 0x3F, 0x3F,
	0x3F, 0x7F, 0x3F, 0x7F, 0x7F, 0x7F, 0x3F, 0x7F,
	0x7F, 0x7F, 0x7F, 0x3F, 0x7F, 0x3F, 0x1F, 0x1F,
	0x0F, 0x0F, 0x17, 0x1B, 0x1E, 0x1F, 0x0F, 0x0F,
	0x0F, 0x1F, 0x0F, 0x0F, 0x0F, 0x0F, 0x1F, 0x0F,
	0x0F, 0x0F, 0x1F, 0x0F, 0x0F, 0x0F, 0x1F, 0x0F,
	0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F,
	0x1F, 0x1F, 0x1F, 0x1F, 0x1F, 0x1F, 0x1F, 0x1F,
	0x1F, 0x1F, 0x1F, 0x1E, 0x1E, 0x1E, 0x14, 0x30,
	0x20, 0x20, 0x30, 0x1A, 0x0E, 0x0E, 0x0E, 0x0F,
	0x1F, 0x17, 0x13, 0x18, 0x18, 0x08, 0x09, 0x0F,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
};

#define		CL_HI		DDRC&=~(1<<0)	//PORTA.0 = SCL = SCK
#define		CL_LOW		DDRC|=(1<<0)	//PORTA.0
#define		DA_HI		DDRC&=~(1<<1)	//PORTA.1 = SDA
#define		DA_LOW		DDRC|=(1<<1)	//PORTA.1

#define		NAME		0b01111000		//¿ƒ–≈— ”—“–Œ…—“¬¿ Õ¿ ÿ»Õ≈
#define		DATS		0b01000000		//œ≈–≈ƒ¿◊¿ Õ≈— ŒÀ‹ »’ ¡¿…“ ƒ¿ÕÕ€’
#define		DAT			0b11000000		//œ≈–≈ƒ¿◊¿ ŒƒÕŒ√Œ ¡¿…“‡ ƒ¿ÕÕ€’
#define		COM			0b10000000		//œ≈–≈ƒ¿◊¿ ŒƒÕŒ√Œ ¡¿…“‡  ŒÃ¿Õƒ€

unsigned char ONE[8] = 
{
	// @0 '1' (4 pixels wide)
	0x60, //  ##
	0xE0, // ###
	0x60, //  ##
	0x60, //  ##
	0x60, //  ##
	0x60, //  ##
	0x60, //  ##
};
unsigned char TWO[8] = 
{
	// @0 '2' (6 pixels wide)
	0x70, //  ###
	0xD8, // ## ##
	0x18, //    ##
	0x30, //   ##
	0x60, //  ##
	0xC0, // ##
	0xF8, // #####
};
unsigned char THREE[8] = 
{
	// @0 '3' (6 pixels wide)
	0x70, //  ###
	0xD8, // ## ##
	0x18, //    ##
	0x30, //   ##
	0x18, //    ##
	0xD8, // ## ##
	0x70, //  ###
};
unsigned char FOUR[8] = 
{
	// @0 '4' (6 pixels wide)
	0x18, //    ##
	0x38, //   ###
	0x78, //  ####
	0xD8, // ## ##
	0xFC, // ######
	0x18, //    ##
	0x18, //    ##
};
unsigned char FIVE[8] =
{
	// @0 '5' (6 pixels wide)
	0xF8, // #####
	0xC0, // ##
	0xF0, // ####
	0x18, //    ##
	0x18, //    ##
	0xD8, // ## ##
	0x70, //  ###
}; 
unsigned char SIX[8] = 
{
	// @0 '6' (6 pixels wide)

	0x70, //  ###
	0xD8, // ## ##
	0xC0, // ##
	0xF0, // ####
	0xD8, // ## ##
	0xD8, // ## ##
	0x70, //  ###
};
unsigned char SEVEN[8] =
{
	// @0 '7' (6 pixels wide)
	0xF8, // #####
	0x18, //    ##
	0x30, //   ##
	0x30, //   ##
	0x30, //   ##
	0x60, //  ##
	0x60, //  ##
};
unsigned char EITHT[8] = 
{
	// @0 '8' (5 pixels wide)
	0x70, //  ###
	0xD8, // ## ##
	0xD8, // ## ##
	0x70, //  ###
	0xD8, // ## ##
	0xD8, // ## ##
	0x70, //  ###
};
unsigned char NINE[8] = 
{
	// @0 '9' (5 pixels wide)
	0x70, //  ###
	0xD8, // ## ##
	0xD8, // ## ##
	0x78, //  ####
	0x18, //    ##
	0xD8, // ## ##
	0x70, //  ###
};
unsigned char ZERO[8] = 
{
	// @0 '0' (6 pixels wide)
	0x70, //  ###
	0xD8, // ## ##
	0xD8, // ## ##
	0xD8, // ## ##
	0xD8, // ## ##
	0xD8, // ## ##
	0x70, //  ###
};

unsigned char Z[8] =
{
	0x78, //  ####
	0xCC, // ##  ##
	0xDC, // ## ###
	0xDC, // ## ###
	0xFC, // ######
	0xEC, // ### ##
	0xEC, // ### ##
	0xCC, // ##  ##
};
unsigned char Y[8] =
{
	// @9 '”' (7 pixels wide)
	0x00, //
	0xC6, // ##   ##
	0x6C, //  ## ##
	0x6C, //  ## ##
	0x38, //   ###
	0x38, //   ###
	0x30, //   ##
	0xE0, // ###
};
unsigned char X[8] =
{
	// @18 '’' (7 pixels wide)
	0x00, //
	0xC6, // ##   ##
	0x6C, //  ## ##
	0x38, //   ###
	0x38, //   ###
	0x38, //   ###
	0x6C, //  ## ##
	0xC6, // ##   ##
};
